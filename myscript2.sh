#!/bin/bash
echo "Bash executed"
echo $1
echo $2

echo -n "*****************"
counter=0
FLAG=false
for i in $(objdump -d $1 | grep "^ " | cut -f2); 
do 
	counter=$((counter+1))

	if [ "$FLAG" = true ]
        then

		printf -v hex2 '%x' $((0x$i - 0x5))
		echo -n -e \\x$hex2 >> file3
		FLAG=false
		continue
	fi
	if [ $i == 'e8' ]
	then
		
		
	        val=$2
		echo -n -e \\xe9  >> file3
	        echo -n -e $val >> file3
	        FLAG=true	
		
	fi
	if [ $counter == 2 ]
	then
		
		printf -v hex '%x' $((0x$i +0x5))
		echo -n -e \\x$hex >> file3
		
	else	
	echo -n -e  \\x$i >> file3; 
	fi
done;
exit 0	
